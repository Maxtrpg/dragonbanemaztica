<style>
/* =========================================
   é­”æ³•é é¢å°ˆå±¬ CSS (V18.0 æ’ç‰ˆä¿®å¾©ç‰ˆ)
   ========================================= */

/* 1. åŸºç¤é¡¯ç¤ºå‹•ç•« */
.magic-section, .rule-content, .school-content { display: none; animation: fadeIn 0.4s ease; }
.active { display: block; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* 2. è¦å‰‡å¡ç‰‡ (Rule Cards) - æ”¹ç‚ºå¯¬ç‰ˆåˆ‡æ›æ¨¡å¼ */
/* ç§»é™¤åŸæœ¬çš„ rule-gridï¼Œæ”¹ç”¨ä¸€èˆ¬å€å¡Šå®¹å™¨ */
.rule-display-area { 
  margin-top: 20px; 
  width: 100%; 
}

/* è¦å‰‡å…§å®¹å€å¡Š (é è¨­éš±è—) */
.rule-card { 
  display: none; /* é è¨­éš±è— */
  width: 100%;   /* å¯¬ç‰ˆ */
  background: rgba(20, 20, 25, 0.6); 
  border: 1px solid rgba(255, 255, 255, 0.1); 
  border-left: 4px solid var(--jade); 
  border-radius: 8px; padding: 30px; /* å¢åŠ å…§è· */
  box-shadow: 0 4px 15px rgba(0,0,0,0.3); 
  position: relative; overflow: hidden;
  line-height: 1.8; /* å¢åŠ è¡Œé«˜æ›´å¥½é–±è®€ */
}

/* æ¿€æ´»ç‹€æ…‹ (é¡¯ç¤º) */
.rule-card.active { 
  display: block; 
  animation: fadeIn 0.4s ease; 
}

.rule-card:hover { background: rgba(30, 30, 35, 0.8); border-color: rgba(255,255,255,0.2); }
.rule-card h3 { color: #fff; font-size: 1.4rem; margin: 0 0 20px 0; padding-bottom: 10px; border-bottom: 1px dashed rgba(255,255,255,0.15); }
.rule-card h3::before { content: 'âœ¦ '; color: var(--gold); }
.rule-card.warning { border-left-color: #e74c3c; background: rgba(40, 10, 10, 0.4); } 
.rule-card.highlight { border-left-color: var(--gold); background: rgba(40, 35, 10, 0.4); } 

/* åˆ—è¡¨æ¨£å¼ä¿®æ­£ */
.rule-card ul, .rule-card ol { padding-left: 1.5rem !important; margin-bottom: 15px; }
.rule-card li { margin-bottom: 8px; color: #ddd; }

/* æ›¸ç±¤æŒ‰éˆ•æ¿€æ´»ç‹€æ…‹ */
.bookmark-btn.active-sub-tab {
  background: var(--gold);
  color: #000;
  border-color: var(--gold);
  font-weight: bold;
  box-shadow: 0 0 10px rgba(201, 163, 90, 0.4);
}

/* 3. æ›¸ç±¤å°èˆªæŒ‰éˆ• */
.bookmark-nav { display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; margin-bottom: 30px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 15px; }
.bookmark-btn { background: rgba(30, 30, 35, 0.8); border: 1px solid rgba(255, 255, 255, 0.2); color: #aaa; padding: 8px 16px; border-radius: 4px; cursor: pointer; transition: all 0.2s ease; }
.bookmark-btn:hover { background: rgba(255, 255, 255, 0.1); color: #fff; border-color: var(--gold); transform: translateY(-2px); }
.rule-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.9rem; }
.rule-table th { background: rgba(201, 163, 90, 0.1); color: var(--gold); padding: 8px; text-align: left; border-bottom: 1px solid var(--gold); }
.rule-table td { padding: 8px; border-bottom: 1px solid rgba(255,255,255,0.05); color: #ddd; }

/* 4. æŠ€èƒ½æ¨¹ (Skill Tree) */
.skilltree-wrap { position: relative; margin: 20px 0; padding: 40px 20px; background: rgba(0, 0, 0, 0.4); border: 1px solid var(--gold); border-radius: 8px; overflow: auto; min-height: 500px; }
.skilltree-svg { position: absolute; top: 0; left: 0; pointer-events: none; z-index: 0; }
.connection { fill: none; stroke: var(--gold); stroke-width: 1.5; opacity: 0.3; transition: all 0.3s; }
.connection.active { stroke: #fff; stroke-width: 2.5; opacity: 0.9; filter: drop-shadow(0 0 5px var(--gold)); }
.skilltree { display: flex; flex-direction: column; align-items: center; position: relative; z-index: 1; gap: 60px; padding-bottom: 20px; min-width: max-content; }
.skill-col { display: flex; flex-direction: row; flex-wrap: wrap; justify-content: center; gap: 20px; width: 100%; max-width: 900px; position: relative; }
.skill-tier-title { width: 100%; text-align: center; color: var(--gold); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; opacity: 0.7; border-bottom: 1px solid rgba(255,255,255,0.1); margin-bottom: 15px; padding-bottom: 2px; }
.skill-node { background: rgba(30, 30, 35, 0.95); border: 1px solid rgba(255, 255, 255, 0.2); color: #ccc; padding: 8px 16px; min-width: 100px; max-width: 160px; font-size: 0.9rem; border-radius: 4px; cursor: pointer; text-align: center; transition: 0.2s; position: relative; box-shadow: 0 4px 8px rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 2; }
.skill-node:hover { border-color: var(--gold); color: #fff; transform: translateY(-2px); box-shadow: 0 0 15px rgba(201, 163, 90, 0.3); z-index: 10; }
.skill-node.active { background: rgba(201, 163, 90, 0.2); border-color: var(--gold); color: var(--gold); font-weight: bold; box-shadow: 0 0 20px rgba(201, 163, 90, 0.5); }

/* 5. æ³•è¡“è©³æƒ…é¢æ¿ (é»‘æ›œçŸ³é¢¨æ ¼) */
.spell-detail-panel { background: rgba(15, 15, 20, 0.98); border: 1px solid var(--gold); border-top: 4px solid var(--gold); border-radius: 8px; padding: 30px; margin-top: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.9); animation: slideUp 0.3s ease; position: relative; text-align: left; min-height: 150px;}
.spell-detail-panel h3 { color: var(--gold); font-size: 1.6rem; font-family: 'Quatl', serif; margin: 0 0 15px 0; border-bottom: 1px solid rgba(255,255,255,0.15); padding-bottom: 10px; }
.spell-detail-panel p { color: #ddd; font-size: 0.8 rem; margin-bottom: 8px; line-height: 1.6; }
.spell-detail-panel .attr { color: #aaa; font-size: 0.9rem; margin-bottom: 4px; }
.spell-detail-panel .desc { 
  margin-top: 15px; 
  padding-top: 15px; 
  border-top: 1px dashed rgba(255,255,255,0.1); 
  color: #e0e0e0;       /* å»ºè­°ï¼šæ”¹æˆç±³ç™½è‰²æˆ–æ·ºç°ï¼Œè¦–è¦ºä¸Šæœƒæ¯”è¼ƒæŸ”å’Œï¼Œä¸åƒç²—é«” */
  font-weight: normal;  /* å¼·åˆ¶è¨­å®šç‚ºä¸€èˆ¬å­—é‡ï¼Œé˜²æ­¢è®Šç²— */
}
.spell-detail-panel strong { color: var(--gold-glow); margin-right: 5px; font-weight: bold; }
.back-to-tree { position: absolute; top: 20px; right: 20px; background: transparent; border: 1px solid var(--text-dim); color: var(--text-dim); padding: 4px 12px; border-radius: 20px; cursor: pointer; font-size: 0.8rem; transition: 0.2s; }
.back-to-tree:hover { border-color: var(--gold); color: var(--gold); }

/* 6. æµæ´¾/ç´€å…ƒå°èˆª */
.epoch-nav { display: flex; justify-content: center; flex-wrap: wrap; gap: 8px; margin: 0 0 25px 0; padding-bottom: 15px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
.epoch-btn, .school-btn { background: rgba(0, 0, 0, 0.3); border: 1px solid var(--text-dim); color: #aaa; padding: 6px 14px; border-radius: 20px; cursor: pointer; font-size: 0.9rem; transition: all 0.3s; letter-spacing: 1px; white-space: nowrap; }
.epoch-btn:hover, .school-btn:hover { border-color: var(--gold); color: #fff; background: rgba(255,255,255,0.05); }
.epoch-btn.active-tab, .school-btn.active-tab { background: var(--gold); color: #000; border-color: var(--gold); font-weight: bold; box-shadow: 0 0 10px rgba(201, 163, 90, 0.3); }

/* 7. æµæ´¾ä»‹ç´¹å¡ */
.lore-card { background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; padding: 20px; margin-bottom: 25px; position: relative; border-left: 4px solid var(--gold); box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
.lore-card h3 { color: #fff; font-size: 1.3rem; margin-top: 0; border-bottom: 1px dashed rgba(255,255,255,0.2); padding-bottom: 10px; }
.lore-card p { color: #e0e0e0; font-size: 0.95rem; line-height: 1.7; }

/* 8. æ–°å¢ï¼šæµæ´¾æŒ‰éˆ•å°ˆç”¨æ’ç‰ˆ (ä¸Š4ä¸‹3ç½®ä¸­) */
.school-flex-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px;
  margin-bottom: 25px;
  padding-bottom: 15px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.school-flex-container .school-btn {
  /* é›»è…¦ç‰ˆï¼šä¸€è¡Œ 4 å€‹ (25% æ‰£é™¤é–“éš™) */
  flex: 0 0 calc(25% - 8px); 
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* æ‰‹æ©Ÿç‰ˆéŸ¿æ‡‰å¼ï¼šè®Šç‚ºä¸€è¡Œ 2 å€‹ï¼Œä»¥å…æ–‡å­—æ“ æˆä¸€åœ˜ */
@media (max-width: 768px) {
  .school-flex-container .school-btn {
    flex: 0 0 calc(50% - 8px);
  }
}

/* === æŠ˜ç–Šå€å¡Šæ¨£å¼ (Collapsible Style) === */
details.toggle-box {
  background: rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  margin-bottom: 20px;
  overflow: hidden;
  transition: all 0.3s;
}

details.toggle-box[open] {
  background: rgba(0, 0, 0, 0.4);
  border-color: var(--gold); /* å±•é–‹æ™‚é‚Šæ¡†è®Šé‡‘è‰² */
}

details.toggle-box summary {
  padding: 15px 20px;
  cursor: pointer;
  list-style: none; /* éš±è—é è¨­ä¸‰è§’å½¢ */
  position: relative;
  background: rgba(255, 255, 255, 0.05);
}

details.toggle-box summary::-webkit-details-marker {
  display: none; /* Chrome éš±è—é è¨­ä¸‰è§’å½¢ */
}

details.toggle-box summary h4 {
  margin: 0;
  display: inline-block;
  border: none; /* ç§»é™¤æ¨™é¡Œåº•ç·š */
  color: #ddd;
}

/* è‡ªå®šç¾©ç®­é ­ */
details.toggle-box summary::after {
  content: 'â–¼';
  position: absolute;
  right: 20px;
  color: var(--gold);
  transition: transform 0.3s;
}

details.toggle-box[open] summary::after {
  transform: rotate(180deg); /* å±•é–‹æ™‚ç®­é ­æ—‹è½‰ */
}

.toggle-content {
  padding: 20px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  animation: fadeIn 0.3s ease;
}

/* === è¿”å›æŒ‰éˆ•æ¨£å¼ === */
.scroll-back-btn {
  display: block;
  width: 100%;
  margin-top: 20px;
  padding: 10px;
  background: rgba(0, 0, 0, 0.5);
  border: 1px solid var(--gold);
  color: var(--gold);
  cursor: pointer;
  text-align: center;
  border-radius: 4px;
  font-weight: bold;
  transition: all 0.2s;
}
.scroll-back-btn:hover {
  background: var(--gold);
  color: #000;
}

/* === æ¶ˆè€—å“åœ–ç¤ºæ¨™ç±¤ (æ˜Ÿå¡µç‰ˆ) === */
.consumable-tag {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin-left: 4px;
  vertical-align: middle;
  cursor: help;
  position: relative;
}

/* åœ–ç¤ºæœ¬é«”ï¼šé–ƒçˆçš„æ˜Ÿå¡µ âœ¨ */
.consumable-tag::after {
  content: "âœ¨"; 
  font-size: 1.1em;
  filter: drop-shadow(0 0 2px rgba(255, 215, 0, 0.6)); /* é‡‘è‰²å¾®å…‰ */
  animation: pulse-star 2s infinite ease-in-out;
}

@keyframes pulse-star {
  0% { transform: scale(1); opacity: 0.8; filter: drop-shadow(0 0 2px rgba(255, 215, 0, 0.4)); }
  50% { transform: scale(1.2) rotate(15deg); opacity: 1; filter: drop-shadow(0 0 6px rgba(255, 255, 224, 0.9)); }
  100% { transform: scale(1); opacity: 0.8; filter: drop-shadow(0 0 2px rgba(255, 215, 0, 0.4)); }
}

/* Tooltip æç¤º */
.consumable-tag:hover::before {
  content: "æ­¤ææ–™å°‡åœ¨æ–½æ³•å¾Œæ¶ˆè€—";
  position: absolute;
  bottom: 120%;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(20, 20, 30, 0.95);
  color: #f1c40f; /* é‡‘é»ƒè‰²æ–‡å­— */
  border: 1px solid #f1c40f;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 0.75rem;
  white-space: nowrap;
  z-index: 100;
  box-shadow: 0 2px 8px rgba(0,0,0,0.6);
  pointer-events: none;
}
</style>

<header>
  <h1>é­”æ³•èˆ‡æ³•è¡“</h1>
  <div class="ornament-divider"></div>
  <p class="intro-text">
    åœ¨é¦¬èŒ²æå¡å¤§é™¸ï¼Œé­”æ³•æ˜¯ç¥æ€§åœ¨å‡¡äººè¡€ç®¡ä¸­çš„è¿´éŸ¿ï¼Œä¹Ÿæ˜¯ä¸€å ´ä»¥è‚‰é«”å‘ç¥éˆç´¢å–åŠ›é‡çš„å±éšªäº¤æ˜“ã€‚<br><br>
  </p>
</header>

<nav class="page-index">
  <span class="index-label">é­”æ³•è³‡æ–™åº« MAGIC DATABASE</span>
  <div class="index-links" style="grid-template-columns: repeat(2, 1fr);">
    <button class="index-btn active-tab" data-target="rules">æ³•è¡“è¦å‰‡</button>
    <button class="index-btn" data-target="schools">æµæ´¾ä»‹ç´¹</button>
  </div>
</nav>

<main>
<section id="rules" class="magic-section active">
    <div class="epoch-nav">
      <button class="epoch-btn active-tab" data-target="rule-intro">æ³•è¡“é ˆçŸ¥</button>
      <button class="epoch-btn" data-target="rule-casting">æ–½æ”¾æ³•è¡“</button>
      <button class="epoch-btn" data-target="rule-learning">å­¸ç¿’æ³•è¡“</button>
    </div>

    <div id="rule-intro" class="rule-content active">
      <div class="bookmark-nav">
        <button class="bookmark-btn active-sub-tab" data-show="intro-basic">åŸºæœ¬æ¦‚å¿µ</button>
        <button class="bookmark-btn" data-show="intro-tier">éšç´š</button>
        <button class="bookmark-btn" data-show="intro-book">æ³•è¡“è¼‰é«”</button>
        <button class="bookmark-btn" data-show="intro-metal">é™åˆ¶</button>
        <button class="bookmark-btn" data-show="intro-item">é­”æ³•ç‰©å“</button>
      </div>

      <div class="rule-display-area">
        <div class="rule-card highlight active" id="intro-basic">
          <h3>åŸºæœ¬æ¦‚å¿µ</h3>
          <ul>
            <li>æ¯å€‹é­”æ³•æµæ´¾éƒ½æ˜¯ç¨ç«‹çš„æ¬¡è¦æŠ€èƒ½ã€‚å‰µè§’æ™‚ï¼Œè–©æ»¿å¯ä»¥é¸æ“‡ä¸€ç¨®æµæ´¾ä½œç‚ºå—è¨“æ¬¡è¦æŠ€èƒ½ï¼ˆåŸºæ–¼æ™ºåŠ›ï¼‰ã€‚</li>
            <li>ä½ å¯ä»¥æ–½æ”¾ä»»ä½•ä½ å·²ç¶“å­¸æœƒçš„æ³•è¡“ï¼Œä¸éœ€è¦è¨˜æ†¶æˆ–æº–å‚™ã€‚</li>
          </ul>
        </div>

        <div class="rule-card" id="intro-tier">
          <h3>éšç´š (Tier)</h3>
          <ul>
            <li>æ¯å€‹æ³•è¡“éƒ½æœ‰ä¸€å€‹éšç´šã€‚é€™ä¸å½±éŸ¿ä»»ä½•éŠæˆ²æ©Ÿåˆ¶ï¼Œåªç”¨ä¾†è¡¨ç¤ºè©²æ³•è¡“æœ‰å¤šè¤‡é›œå’Œå¤šå¼·å¤§ã€‚</li>
            <li>è–©æ»¿åœ¨éŠæˆ²é–‹å§‹æ™‚åªæœ‰ 3 å€‹ 1 éšæ³•è¡“å’Œ 1 å€‹ 2 éšæ³•è¡“ï¼Œä½†å¯ä»¥åœ¨å†’éšªéç¨‹ä¸­å­¸åˆ°æ›´é«˜éšçš„æ³•è¡“ã€‚</li>
          </ul>
        </div>

        <div class="rule-card" id="intro-book">
          <h3>æ³•è¡“è¼‰é«” (Spell Mediums)</h3>
          <p>è–©æ»¿ç´€éŒ„æ³•è¡“æ˜¯ã€Œæ•ç²éˆæ„Ÿã€çš„éç¨‹ã€‚ä½ å¯ä»¥å¾ä»¥ä¸‹å½¢å¼ä¸­é¸æ“‡ä¸€ç¨®ä½œç‚ºä½ çš„ã€Œé­”å°æ›¸ã€ï¼š</p>
          <ul style="padding-left: 1.5rem; margin-top: 10px;">
            <li><strong>é˜¿è«æ–¯ç‰¹åˆ©æ³•å…¸ (Amoxtli)ï¼š</strong>ç”±ç„¡èŠ±æœæ¨¹çš®ç´™æ‘ºç–Šè€Œæˆçš„é•·å·ï¼Œç¹ªæ»¿äº†é®®è±”çš„ç¥è–åœ–ç•«æ–‡å­—ã€‚é–±è®€å®ƒéœ€è¦è§£è®€éš±å–»èˆ‡ç¥è©±ã€‚<br><em>ï¼ˆé©åˆï¼šç¾½ç¹”ç§˜æ³•ã€å¤©å‘½æ›œæ—¥ï¼‰</em></li>
            <li><strong>å¥‡æ™®ç¹©çµ (Mecatl)ï¼š</strong>ä¸€ä¸²è¤‡é›œçš„å½©è‰²ç¹©çµã€‚é€éç¹©çµçš„æè³ªã€é¡è‰²èˆ‡æ‰“çµæ–¹å¼ä¾†è¨˜éŒ„æ³•è¡“çš„é »ç‡èˆ‡å’’èªçµæ§‹ã€‚åªæœ‰è§¸æ‘¸æ‰èƒ½ã€Œé–±è®€ã€ã€‚<br><em>ï¼ˆé©åˆï¼šæ»Œç©¢é†«é“ã€ç´ç“¦çˆ¾ï¼‰</em></li>
            <li><strong>ç¸éª¨åœ–é¨° (Omitl)ï¼š</strong>åˆ»æ»¿ç¬¦æ–‡çš„è…¿éª¨ã€é¾œæ®¼æˆ–é ­éª¨ã€‚æ³•è¡“è¢«é›•åˆ»åœ¨éª¨é«“ä¹‹ä¸­ï¼Œæ–æ™ƒæ™‚æœƒç™¼å‡ºéˆæ€§çš„è²éŸ¿ã€‚<br><em>ï¼ˆé©åˆï¼šæ¯’ç‰™ç¸è¡“ã€è¬è±¡ç¥æ¯ï¼‰</em></li>
            <li><strong>è¡€è‚‰åˆ»å° (Nacatl)ï¼š</strong>æ²’æœ‰å¤–ç‰©ï¼Œæ³•è¡“ç›´æ¥ä»¥åˆºé’ã€ç©¿å­”æˆ–ç–¤ç—•çš„å½¢å¼è¨˜éŒ„åœ¨è–©æ»¿è‡ªå·±çš„çš®è†šä¸Šã€‚æ–½æ³•å³æ˜¯é–±è®€è‡ªèº«çš„ç—›è‹¦ã€‚<br><em>ï¼ˆé©åˆï¼šå¿ƒè¡€å™¬å„€ï¼‰</em></li>
          </ul>
          <hr style="border:0; border-top:1px dashed rgba(255,255,255,0.1); margin:10px 0;">
          <p><strong>è¦å‰‡ï¼š</strong>è¨˜éŒ„ä¸€å€‹æ–°æ³•è¡“éœ€è¦èŠ±è²»ä¸€ç­æ™‚é–“è£½ä½œå°æ‡‰çš„è¼‰é«”ã€‚é–±è®€è¼‰é«”æ–½æ³•æ™‚ï¼Œæ–½æ³•æ™‚é–“åŠ å€ï¼Œä½†æª¢å®š<strong>è‡ªå‹•æˆåŠŸ</strong>ã€‚</p>
        </div>

        <div class="rule-card warning" id="intro-metal">
          <h3>é‡‘å±¬èˆ‡é­”æ³•</h3>
          <ul>
            <li>é‡‘å±¬æœ‰åé­”æ³•çš„æ•ˆæœï¼Œè‹¥ä½ èº«ç©¿é‡‘å±¬è­·ç”²æˆ–å‚™æˆ°æ­¦å™¨ä¸­æœ‰é‡‘å±¬æ­¦å™¨ï¼Œ<strong>ä½ å°±ç„¡æ³•æ–½æ”¾é­”æ³•</strong>ã€‚</li>
            <li>é€™åŒ…æ‹¬éƒ¨åˆ†é‡‘å±¬çš„ç‰©å“ï¼Œä¾‹å¦‚æ–§ã€çŸ›ã€é‘²é‡˜çš®ç”²ã€é‡‘å±¬ç®­çŸ¢ã€‚</li>
            <li>ç‰©å“æ¬„è£¡çš„ç‰©å“ä¸å½±éŸ¿ã€‚</li>
          </ul>
        </div>

        <div class="rule-card" id="intro-item">
          <h3>é­”æ³•ç‰©å“</h3>
          <ul>
            <li>é­”æ³•ç‰©å“å¯èƒ½æœƒå«æœ‰ä¸€å€‹æˆ–å¤šå€‹æ³•è¡“ï¼Œå¯ä»¥ç”±éè–©æ»¿è§’è‰²å•Ÿå‹•ã€‚</li>
            <li>è¾¨è­˜æˆ–å•Ÿå‹•é­”æ³•ç‰©å“å…§çš„æ³•è¡“éœ€è¦é€²è¡Œèªè¨€æª¢å®šæˆ–ä»»æ„é­”æ³•æµæ´¾æª¢å®šã€‚</li>
            <li>ä½¿ç”¨é­”æ³•ç‰©å“å…§çš„æ³•è¡“ä¸€æ¨£è¦æ¶ˆè€—è‡ªèº«çš„ WPã€‚æœ‰äº›é­”æ³•ç‰©å“æœƒå„²å­˜ä¸€å®šæ•¸é‡çš„ WP ä¾›äººä½¿ç”¨ï¼Œè€Œä¸ç”¨æ¶ˆè€—è‡ªå·±çš„ WPã€‚</li>
          </ul>
        </div>
      </div>
    </div>

    <div id="rule-casting" class="rule-content">
      <div class="bookmark-nav">
        <button class="bookmark-btn active-sub-tab" data-show="cast-step">æ–½æ³•æ­¥é©Ÿ</button>
        <button class="bookmark-btn" data-show="cast-blood">æ±²å–èº«é«”</button>
        <button class="bookmark-btn" data-show="cast-crit">å¤§æˆåŠŸ</button>
        <button class="bookmark-btn" data-show="cast-fumble">å¤§å¤±æ•—</button>
        <button class="bookmark-btn" data-show="cast-param">åƒæ•¸è©³è§£</button>
      </div>

      <div class="rule-display-area">
        <div class="rule-card highlight active" id="cast-step">
          <h3>æ–½æ³•æ­¥é©Ÿ</h3>
          <ol>
            <li>æ¶ˆè€—æ–½æ”¾æ³•è¡“æ‰€éœ€çš„ WPï¼ˆæ³•è¡“å¨åŠ›ç­‰ç´š Ã—2ï¼Œæˆ²æ³•åªæ¶ˆè€— 1 WPï¼‰ã€‚æ³•è¡“çš„å¨åŠ›ç­‰ç´šä»£è¡¨ä½ åœ¨æ–½æ³•æ™‚ç‚ºè©²æ³•è¡“çŒæ³¨äº†å¤šå°‘åŠ›é‡ã€‚å¨åŠ›ç­‰ç´šç¯„åœç‚º 1-3ã€‚</li>
            <li>é€²è¡Œè©²é­”æ³•æµæ´¾çš„æŠ€èƒ½æª¢å®šï¼ˆé€šç”¨æ³•è¡“å¯ç”¨ä»»æ„æµæ´¾æ–½æ”¾ã€æˆ²æ³•ä¸éœ€è¦é€²è¡Œæª¢å®šï¼‰ã€‚</li>
            <li>è‹¥æª¢å®šæˆåŠŸï¼Œæ³•è¡“æˆåŠŸæ–½æ”¾ã€‚</li>
            <li>è‹¥æª¢å®šå¤±æ•—ï¼Œæ³•è¡“ç„¡æ•ˆï¼ˆå¯ä»¥å¼·æ¨æª¢å®šï¼‰ã€‚</li>
          </ol>
        </div>

        <div class="rule-card warning" id="cast-blood">
          <h3>æ±²å–èº«é«”åŠ›é‡ (Blood Magic)</h3>
          <p>å¦‚æœä½ æ²’æœ‰è¶³å¤ çš„ WP å¯ä»¥æ¶ˆè€—ï¼Œä½ å¯ä»¥å¾è‡ªå·±çš„èº«é«”æ±²å–åŠ›é‡ã€‚ä½†é€™å€‹è¡Œç‚ºå¾ˆå±éšªï¼Œç”šè‡³æ˜¯è‡´å‘½çš„ã€‚</p>
          <ol>
            <li>åœ¨æ–½æ³•å‰éª° 1D4ã€1D6ã€1D8ã€1D10ã€1D12 æˆ– 1D20ï¼ˆç”±ä½ é¸æ“‡ï¼‰ã€‚</li>
            <li>æ“²éª°çš„çµæœä»£è¡¨ä½ æœƒé¦¬ä¸Šç²å¾—åŒæ¨£æ•¸é‡çš„<strong>è‡¨æ™‚ WP</strong>ã€‚</li>
            <li>ä½ çš„ HP ä¹Ÿæœƒå—åˆ°<strong>ç›¸åŒæ•¸é‡çš„å‚·å®³</strong>ï¼Œä½†æœƒåœ¨æ–½æ³•çµæŸå¾Œæ‰è¨ˆç®—ã€‚</li>
            <li>ä½ ä¸èƒ½ç”¨æ±²å–èº«é«”åŠ›é‡çš„æ–¹å¼æ–½æ”¾æ²»ç™‚æ³•è¡“ä¾†æ²»ç™‚è‡ªå·±ã€‚</li>
            <li><strong>æ³¨æ„ï¼šç¾½ç¹”ç§˜æ³•å’Œå¤©å‘½æ›œæ—¥æµæ´¾è±¡å¾µå…‰æ˜ï¼Œè‹¥ç”¨æ­¤æ–¹å¼æ–½æ³•ï¼Œæ–½æ³•æª¢å®šå…·æœ‰åŠ£å‹¢ï¼›æ¯’ç‰™ç¸è¡“å’Œå¿ƒè¡€å™¬å„€è±¡å¾µé»‘æš—ï¼Œè‹¥ç”¨æ­¤æ–¹å¼æ–½æ³•ï¼Œæ–½æ³•æª¢å®šå…·æœ‰å„ªå‹¢</strong></li>
          </ol>
        </div>

        <div class="rule-card" id="cast-crit">
          <h3>æ–½æ³•å¤§æˆåŠŸ</h3>
          <p>ç›®æ¨™ä¹Ÿå¿…é ˆéª°åˆ°å¤§æˆåŠŸæ‰èƒ½æˆåŠŸæŠµæŠ—ã€æ ¼æ“‹æˆ–é–ƒé¿ã€‚å¦å¤–ä½ å¯ä»¥é¸æ“‡ä¸‹åˆ—ä¸€ç¨®æ•ˆæœï¼š</p>
          <ul>
            <li>æ³•è¡“çš„å‚·å®³åŠ å€ã€‚</li>
            <li>æ³•è¡“çš„å°„ç¨‹åŠ å€ã€‚</li>
            <li>æ³•è¡“ä¸æ¶ˆè€— WPã€‚</li>
            <li>é¦¬ä¸Šæ–½æ”¾å¦ä¸€å€‹æ³•è¡“ï¼Œä½†æ–½æ³•æª¢å®šç²å¾— 1 å€‹åŠ£å‹¢ã€‚</li>
          </ul>
        </div>

        <div class="rule-card warning" id="cast-fumble">
          <h3>æ–½æ³•å¤§å¤±æ•—</h3>
          <p>ç„¡æ³•å¼·æ¨æª¢å®šã€‚å¦å¤–ï¼Œæ“² 1D20 çœ‹çœ‹æœƒç™¼ç”Ÿä»€éº¼æ–½æ³•æ„å¤–ã€‚</p>
          <p>ä¸åŒçš„é­”æ³•æµæ´¾æœ‰å„è‡ªçš„ç‰¹è‰²å’Œé¢¨æ ¼ï¼Œå› æ­¤æ–½æ³•æ„å¤–ä¹Ÿä¸ç›¡ç›¸åŒï¼ˆè©³æƒ…è«‹è¦‹å„æµæ´¾é é¢ï¼‰ã€‚</p>
        </div>

        <div class="rule-card" id="cast-param">
          <h3>æ³•è¡“åƒæ•¸è©³è§£</h3>
          <ul>
            <li><strong>æ–½æ³•æ™‚é–“ï¼š</strong>
               <ul>
                  <li>å¤§å¤šæ³•è¡“çš„æ–½æ”¾æ™‚é–“éƒ½æ˜¯ä¸€å€‹å‹•ä½œã€‚</li>
                  <li>åæ‡‰é¡çš„æ³•è¡“ä¸æœƒæ¶ˆè€—ä½ è©²è¼ªçš„å‹•ä½œã€‚ä»£è¡¨åªè¦ä½ æœ‰è¶³å¤ çš„ WPï¼Œå°±å¯ä»¥åœ¨ä¸€è¼ªå…§å¤šæ¬¡æ–½æ”¾ã€‚</li>
                  <li>å„€å¼é¡æ³•è¡“éœ€è€—æ™‚ä¸€åˆ»æ™‚é–“ï¼Œç”šè‡³ä¸€ç­æ™‚é–“ã€‚</li>
                  <li>ç›´æ¥é–±è®€é­”å°æ›¸ä¾†æ–½æ”¾æ³•è¡“éœ€è¦å…©å€çš„æ™‚é–“ï¼Œä»£è¡¨ä¸€å€‹å‹•ä½œçš„æ³•è¡“éœ€è¦å…©å€‹å‹•ä½œï¼Œä¹Ÿå°±æ˜¯å…©è¼ªæ‰èƒ½å®Œæˆã€‚æ–½æ”¾æ™‚é–“çµæŸå¾Œï¼Œæ³•è¡“æª¢å®šæœƒè‡ªå‹•æˆåŠŸã€‚</li>
                  <li>åæ‡‰é¡æ³•è¡“ç„¡æ³•ç›´æ¥é–±è®€é­”å°æ›¸æ–½æ”¾ã€‚</li>
              </ul>
            </li>
            <li><strong>æ³•è¡“å°„ç¨‹ï¼š</strong>
               <ul>
                  <li>æ³•è¡“åˆ—å‡ºçš„å°„ç¨‹ç‚ºæœ€å¤§å°„ç¨‹ã€‚</li>
                  <li>å°„ç¨‹ç‚ºã€Œè‡ªèº«ã€ä»£è¡¨è©²æ³•è¡“åªå½±éŸ¿æ–½æ³•è€…ã€‚</li>
                  <li>é™¤éå¦æœ‰èªªæ˜ï¼Œå¦å‰‡ ç¯„åœæ³•è¡“ çš„æºé»éƒ½æ˜¯æ–½æ³•è€…æœ¬èº«ã€‚</li>
                  <li>é™¤éå¦æœ‰èªªæ˜ï¼Œç¯„åœæ³•è¡“ å¯ä»¥è¢«é–ƒé¿ï¼Œä½†ä¸èƒ½è¢«æ ¼æ“‹ã€‚</li>
                  <li>ä½ å¯ä»¥æ’é™¤å€åŸŸå…§çš„ç‰¹å®šç›®æ¨™ä¸å—æ³•è¡“å½±éŸ¿ï¼Œä½†æ³•è¡“æª¢å®šæœƒæœ‰åŠ£å‹¢ã€‚</li>
              </ul></li>
            <li><strong>æ–½æ³•æ§‹æï¼š</strong>è‹¥æƒ³æ–½æ”¾æ³•è¡“ï¼Œä½ å¿…é ˆç¬¦åˆæ³•è¡“åˆ—å‡ºçš„æ‰€æœ‰æ§‹æé …ç›®ï¼š
               <ul>
                  <li>è²éŸ³ï¼šç”±åŸå”±æˆ–çœŸè¨€ç™¼å‹•æ³•è¡“ï¼ˆä¸èƒ½ç”¨æ‚„æ‚„è©±çš„éŸ³é‡ï¼‰</li>
                  <li>æ‰‹å‹¢ï¼šç”±ç‰¹å®šæ‰‹éƒ¨é‹å‹•ç™¼å‹•æ³•è¡“</li>
                  <li>æ³•å™¨ï¼šç”±æ‰‹ä¸­ç‰©å“ç™¼å‹•æ³•è¡“</li>
                  <li>ææ–™ï¼šç”±ç‰¹å®šææ–™ç™¼å‹•æ³•è¡“</li>
              </ul></li>
            <li><strong>æŒçºŒæ™‚é–“ï¼š</strong>
               <ul>
                  <li>å³æ•ˆï¼šé¦¬ä¸Šç”Ÿæ•ˆä¸”æ²’æœ‰æŒçºŒæ•ˆæœã€‚</li>
                  <li>ä¸€è¼ªï¼šæŒçºŒåˆ°ä¸‹ä¸€è¼ªä½ è‡ªå·±çš„å›åˆã€‚</li>
                  <li>ä¸€åˆ»ï¼šæŒçºŒä¸€åˆ»æ™‚é–“ã€‚</li>
                  <li>ä¸€ç­ï¼šæŒçºŒä¸€ç­æ™‚é–“ã€‚</li>
                  <li>å°ˆæ³¨ï¼šæŒçºŒåˆ°ä½ æ¡å–å…¶ä»–å‹•ä½œã€å—åˆ°å‚·å®³ï¼Œæˆ–æŠµæŠ—ææ‡¼çš„æ„å¿—æª¢å®šå¤±æ•—ã€‚è‹¥ä½ è¢«çªç„¶çš„é¨·å‹•å½±éŸ¿ï¼Œä½ å¿…é ˆé€²è¡Œæ„å¿—æª¢å®šä¾†ç¶­æŒå°ˆæ³¨ã€‚</li>
              </ul></li>
          </ul>
        </div>
      </div>
    </div>

    <div id="rule-learning" class="rule-content">
      <div class="bookmark-nav">
        <button class="bookmark-btn active-sub-tab" data-show="learn-pre">å…ˆæ±ºæ¢ä»¶</button>
        <button class="bookmark-btn" data-show="learn-teacher">æ‰¾å°å¸«</button>
        <button class="bookmark-btn" data-show="learn-self">è‡ªå­¸</button>
        <button class="bookmark-btn" data-show="learn-trick">æˆ²æ³•</button>
        <button class="bookmark-btn" data-show="learn-other">è·¨æµæ´¾</button>
      </div>

      <div class="rule-display-area">
        <div class="rule-card active" id="learn-pre">
          <h3>å…ˆæ±ºæ¢ä»¶</h3>
          <p>æœ‰äº›æ³•è¡“æ“æœ‰ä¸€äº›å…ˆæ±ºæ¢ä»¶ï¼Œä½ å¿…é ˆç¬¦åˆè©²å…ˆæ±ºæ¢ä»¶æ‰èƒ½å­¸ç¿’è©²æ³•è¡“ã€‚å…ˆæ±ºæ¢ä»¶é€šå¸¸è¦æ±‚ä½ å­¸æœƒç‰¹å®šé­”æ³•æµæ´¾ï¼Œæˆ–å­¸æœƒå…¶ä»–ç‰¹å®šæ³•è¡“ã€‚</p>
        </div>

        <div class="rule-card highlight" id="learn-teacher">
          <h3>æ‰¾å°å¸«å­¸ç¿’</h3>
          <p>å­¸ç¿’æ³•è¡“æœ€ç°¡å–®ï¼ˆä½†æœ€æ˜‚è²´ï¼‰çš„æ–¹æ³•æ˜¯å‘æœƒè©²æ³•è¡“çš„å°å¸«å­¸ç¿’ã€‚</p>
          <ul>
            <li><strong>è€—æ™‚ï¼š</strong>ä¸€ç­æ™‚é–“ã€‚ä½†ä½ åœ¨è©²æ¬¡éŠæˆ²åœ˜å‹™çµæŸå‰ç„¡æ³•å•Ÿå‹•é€™å€‹æ–°æ³•è¡“ã€‚</li>
            <li><strong>æª¢å®šï¼š</strong>èª²ç¨‹çµæŸå¾Œï¼Œé€²è¡Œä¸€æ¬¡å¸¶æœ‰<strong>å„ªå‹¢</strong>çš„æ™ºåŠ›æª¢å®šã€‚è‹¥æˆåŠŸå‰‡å­¸æœƒã€‚</li>
            <li><strong>é™åˆ¶ï¼š</strong>åœ¨éŠæˆ²åœ˜å‹™çµæŸæ™‚ï¼Œä½ å¿…é ˆç”¨è©²å‡ç´šæ¨™è¨˜ä¾†å­¸ç¿’æ–°æ³•è¡“ï¼Œä¸èƒ½ç”¨ä¾†æå‡æŠ€èƒ½ç­‰ç´šã€‚</li>
          </ul>
        </div>

        <div class="rule-card" id="learn-self">
          <h3>æ³•è¡“è¼‰é«”è‡ªå­¸</h3>
          <p>å¦‚æœä½ å¤ å¹¸é‹ï¼Œä½ å¯ä»¥æ‰¾åˆ°å…¶ä»–è–©æ»¿çš„æ³•è¡“è¼‰é«”ï¼Œç„¶å¾Œé è‡ªå·±è‡ªå­¸å…¶ä¸­çš„æ³•è¡“ã€‚</p>
          <ul>
            <li><strong>è€—æ™‚ï¼š</strong>ä¸€ç­æ™‚é–“ã€‚</li>
            <li><strong>æª¢å®šï¼š</strong>å­¸ç¿’æ–¹æ³•å’Œå‘å°å¸«å­¸ç¿’ä¸€æ¨£ï¼Œä½†åœ¨æœ€å¾Œéšæ®µæœƒé€²è¡Œèªè¨€æª¢å®šï¼Œè€Œä¸”<strong>ä¸æœƒæœ‰å„ªå‹¢</strong>ã€‚</li>
          </ul>
        </div>

        <div class="rule-card" id="learn-trick">
          <h3>å­¸ç¿’æˆ²æ³•</h3>
          <p>æˆ²æ³•éå¸¸å®¹æ˜“å­¸ç¿’ã€‚ä¸€æ¨£è¦å‘å°å¸«æˆ–æ³•è¡“è¼‰é«”å­¸ç¿’ã€‚</p>
          <ul>
            <li><strong>è€—æ™‚ï¼š</strong>ä¸€åˆ»æ™‚é–“ã€‚</li>
            <li><strong>ç‰¹é»ï¼š</strong>ä¸ç”¨æ‰“ä¸Šå‡ç´šæ¨™è¨˜ï¼Œä¹Ÿä¸ç”¨é€²è¡Œæª¢å®šã€‚</li>
          </ul>
        </div>

        <div class="rule-card warning" id="learn-other">
          <h3>å­¸ç¿’å…¶ä»–é­”æ³•æµæ´¾</h3>
          <ul>
            <li>è‹¥è¦å­¸ç¿’å…¶ä»–é­”æ³•æµæ´¾ï¼Œä½ å¿…é ˆå…ˆç²å¾—è‹±é›„èƒ½åŠ›<strong>ã€Œé­”æ³•å¤©è³¦ã€</strong>ã€‚</li>
            <li>åœ¨æ“æœ‰è©²é­”æ³•æµæ´¾çš„å°å¸«åº•ä¸‹å­¸ç¿’è‡³å°‘<strong>ä¸€å€‹ç¦®æ‹œ</strong>ã€‚</li>
            <li>ä¸€å€‹ç¦®æ‹œçµæŸå¾Œï¼Œé€²è¡Œä¸€æ¬¡æ™ºåŠ›æª¢å®šã€‚è‹¥æˆåŠŸï¼Œä½ æœƒç²å¾—è©²é­”æ³•æµæ´¾çš„åŸºç¤æŠ€èƒ½ç­‰ç´šã€‚</li>
            <li>åœ¨å†’éšªéç¨‹ä¸­ï¼Œä½ çš„è¡Œå‹•å¯èƒ½æœƒå°è‡´ä½ å­¸ç¿’åˆ°ä¸€äº›ä¸å±¬æ–¼ç•¶å‰æµæ´¾ä¸­çš„æ³•è¡“ï¼Œé€™æˆ–è¨±æœƒå°ä½ çš„æœªä¾†ç”¢ç”Ÿæ„æƒ³ä¸åˆ°çš„å¾Œæœã€‚</li>
            <li><strong>æ³¨æ„ï¼šç¾½ç¹”ç§˜æ³•å’Œå¤©å‘½æ›œæ—¥æµæ´¾è±¡å¾µå…‰æ˜ï¼Œæ¯’ç‰™ç¸è¡“å’Œå¿ƒè¡€å™¬å„€è±¡å¾µé»‘æš—ï¼Œå…‰æ˜å’Œé»‘æš—æ°¸é ç„¡æ³•å…±å­˜ï¼</strong></li>
          </ul>
        </div>
      </div>
    </div>
  </section>

<section id="schools" class="magic-section">
  <div class="school-flex-container">
    <button class="school-btn active-tab" data-target="school-general" data-src="pages/magic/general.html">ç´ç“¦çˆ¾(é€šç”¨)</button>
    <button class="school-btn" data-target="school-hishna" data-src="pages/magic/hishna.html">æ¯’ç‰™ç¸è¡“(ç¸è¡“)</button>
    <button class="school-btn" data-target="school-pluma" data-src="pages/magic/pluma.html">ç¾½ç¹”ç§˜æ³•(ç¾½è¡“)</button>
    <button class="school-btn" data-target="school-tonalli" data-src="pages/magic/tonalli.html">å¤©å‘½æ›œæ—¥(æ—¥è¡“)</button>
    
    <button class="school-btn" data-target="school-teyolia" data-src="pages/magic/teyolia.html">å¿ƒè¡€å™¬å„€(è¡€è¡“)</button>
    <button class="school-btn" data-target="school-ticiyotl" data-src="pages/magic/ticiyotl.html">æ»Œç©¢é†«é“(é†«è¡“)</button>
    <button class="school-btn" data-target="school-nauhyotl" data-src="pages/magic/nauhyotl.html">è¬è±¡ç¥æ¯(æºè¡“)</button>
  </div>

    <div id="school-general" class="school-content active"></div>
    <div id="school-pluma" class="school-content"></div>
    <div id="school-hishna" class="school-content"></div>
    <div id="school-tonalli" class="school-content"></div>
    <div id="school-teyolia" class="school-content"></div>
    <div id="school-ticiyotl" class="school-content"></div>
    <div id="school-nauhyotl" class="school-content"></div>
  </section>
</main>
<script>
(function() {
  console.log('ğŸ”® é­”æ³•é é¢è…³æœ¬å·²å•Ÿå‹•');

  const tabs = document.querySelectorAll('.school-btn');
  
  tabs.forEach(btn => {
    btn.onclick = function() {
      // 1. æŒ‰éˆ•è®Šè‰²
      tabs.forEach(b => b.classList.remove('active', 'active-tab'));
      this.classList.add('active', 'active-tab');

      // 2. å…§å®¹åˆ‡æ›
      const targetId = this.dataset.target; // ä¾‹å¦‚ "school-general"
      
      // éš±è—æ‰€æœ‰å…§å®¹ï¼šæˆ‘å€‘å…ˆæŠ“çˆ¶å®¹å™¨ï¼Œç„¶å¾ŒæŠŠä¸‹é¢çš„ div éƒ½è—èµ·ä¾†
      // å‡è¨­æŒ‰éˆ•å’Œå…§å®¹éƒ½åœ¨åŒä¸€å€‹å¤§å®¹å™¨è£¡ï¼Œæˆ–è€…å…§å®¹æœ‰å…±åŒçš„ class
      // é€™è£¡ä½¿ç”¨æœ€ä¿éšªçš„åšæ³•ï¼šéš±è—æ‰€æœ‰ ID é–‹é ­æ˜¯ school- çš„ div
      document.querySelectorAll('div[id^="school-"]').forEach(div => {
         // åªéš±è—å…§å®¹å€å¡Š (é¿å…èª¤å‚·æŒ‰éˆ•æœ¬èº«)
         if (!div.classList.contains('school-btn')) {
             div.style.display = 'none';
             div.classList.remove('active');
         }
      });

      // é¡¯ç¤ºç›®æ¨™
      const targetContent = document.getElementById(targetId);
      if (targetContent) {
        targetContent.style.display = 'block';
        targetContent.classList.add('active');
        
        // é‡æ’­å‹•ç•«
        targetContent.style.animation = 'none';
        targetContent.offsetHeight; 
        targetContent.style.animation = 'fadeIn 0.4s ease';
      } else {
        console.error('æ‰¾ä¸åˆ°ç›®æ¨™ ID:', targetId);
      }
    };
  });
})();

</script>
